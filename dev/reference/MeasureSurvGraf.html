<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Integrated Graf Score Survival Measure — MeasureSurvGraf • mlr3proba</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Integrated Graf Score Survival Measure — MeasureSurvGraf" />
<meta property="og:description" content="Calculates the Integrated Graf Score, aka integrated Brier score or squared loss.
For an individual who dies at time \(t\), with predicted Survival function, \(S\), the
Graf Score at time \(t^*\) is given by
$$L(S,t|t^*) = [(S(t^*)^2)I(t \le t^*, \delta = 1)(1/G(t))] + [((1 - S(t^*))^2)I(t &amp;gt; t^*)(1/G(t^*))]$$
where \(G\) is the Kaplan-Meier estimate of the censoring distribution.
Note: If comparing the integrated graf score to other packages, e.g. pec::pec(), then
method = 2 should be used, however the results may still be very slightly different as
this package uses survfit to estimate the censoring distribution, in line with the Graf 1999 paper.
Whereas some other packages use prodlim with reverse = TRUE (meaning Kaplan-Meier is not used).
If integrated == FALSE then the sample mean is taken for the single specified times, \(t^*\), and the returned
score is given by
$$L(S,t|t^*) = \frac{1}{N} \sum_{i=1}^N L(S_i,t_i|t^*)$$
where \(N\) is the number of observations, \(S_i\) is the predicted survival function for
individual \(i\) and \(t_i\) is their true survival time.
If integrated == TRUE then an approximation to integration is made by either taking the sample
mean over all \(T\) unique time-points (method == 1), or by taking a mean weighted by the difference
between time-points (method == 2). Then the sample mean is taken over all \(N\) observations.
$$L(S) = \frac{1}{NT} \sum_{i=1}^N \sum_{j=1}^T L(S_i,t_i|t^*_j)$$" />
<meta property="og:image" content="https://mlr3proba.mlr-org.com/logo.svg" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3proba <small>v0.1.4.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/survival.html">Survival Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3proba/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Integrated Graf Score Survival Measure</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3proba/blob/master/R/MeasureSurvGraf.R'><code>R/MeasureSurvGraf.R</code></a></small>
    <div class="hidden name"><code>MeasureSurvGraf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates the Integrated Graf Score, aka integrated Brier score or squared loss.</p>
<p>For an individual who dies at time \(t\), with predicted Survival function, \(S\), the
Graf Score at time \(t^*\) is given by
$$L(S,t|t^*) = [(S(t^*)^2)I(t \le t^*, \delta = 1)(1/G(t))] + [((1 - S(t^*))^2)I(t &gt; t^*)(1/G(t^*))]$$
where \(G\) is the Kaplan-Meier estimate of the censoring distribution.</p>
<p>Note: If comparing the integrated graf score to other packages, e.g. <code><a href='https://rdrr.io/pkg/pec/man/pec.html'>pec::pec()</a></code>, then
<code>method = 2</code> should be used, however the results may still be very slightly different as
this package uses <code>survfit</code> to estimate the censoring distribution, in line with the Graf 1999 paper.
Whereas some other packages use <code>prodlim</code> with <code>reverse = TRUE</code> (meaning Kaplan-Meier is not used).</p>
<p>If <code>integrated == FALSE</code> then the sample mean is taken for the single specified <code>times</code>, \(t^*\), and the returned
score is given by
$$L(S,t|t^*) = \frac{1}{N} \sum_{i=1}^N L(S_i,t_i|t^*)$$
where \(N\) is the number of observations, \(S_i\) is the predicted survival function for
individual \(i\) and \(t_i\) is their true survival time.</p>
<p>If <code>integrated == TRUE</code> then an approximation to integration is made by either taking the sample
mean over all \(T\) unique time-points (<code>method == 1</code>), or by taking a mean weighted by the difference
between time-points (<code>method == 2</code>). Then the sample mean is taken over all \(N\) observations.
$$L(S) = \frac{1}{NT} \sum_{i=1}^N \sum_{j=1}^T L(S_i,t_i|t^*_j)$$</p>
    </div>



    <h2 class="hasAnchor" id="dictionary"><a class="anchor" href="#dictionary"></a>Dictionary</h2>

    

<p>This <a href='https://mlr3.mlr-org.com/reference/Measure.html'>Measure</a> can be instantiated via the <a href='https://mlr3misc.mlr-org.com/reference/Dictionary.html'>dictionary</a>
<a href='https://mlr3.mlr-org.com/reference/mlr_measures.html'>mlr_measures</a> or with the associated sugar function <a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msr()</a>:</p><pre><span class='no'>MeasureSurvGraf</span>$<span class='fu'>new</span>()
<span class='no'>mlr_measures</span>$<span class='fu'><a href='https://rdrr.io/r/base/get.html'>get</a></span>(<span class='st'>"surv.graf"</span>)
<span class='fu'>msr</span>(<span class='st'>"surv.graf"</span>)</pre>

    <h2 class="hasAnchor" id="meta-information"><a class="anchor" href="#meta-information"></a>Meta Information</h2>

    

<ul>
<li><p>Type: <code>"surv"</code></p></li>
<li><p>Range: \([0, \infty)\)</p></li>
<li><p>Minimize: <code>TRUE</code></p></li>
<li><p>Required prediction: <code>distr</code></p></li>
</ul>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Graf E, Schmoor C, Sauerbrei W, Schumacher M (1999).
&#8220;Assessment and comparison of prognostic classification schemes for survival data.&#8221;
<em>Statistics in Medicine</em>, <b>18</b>(17-18), 2529--2545.
doi: <a href='https://doi.org/10.1002/(sici)1097-0258(19990915/30)18:17/18&lt;2529::aid-sim274&gt;3.0.co;2-5'>10.1002/(sici)1097-0258(19990915/30)18:17/18&lt;2529::aid-sim274&gt;3.0.co;2-5</a>
.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other survival measures: 
<code><a href='MeasureSurvBeggC.html'>MeasureSurvBeggC</a></code>,
<code><a href='MeasureSurvChamblessAUC.html'>MeasureSurvChamblessAUC</a></code>,
<code><a href='MeasureSurvGonenC.html'>MeasureSurvGonenC</a></code>,
<code><a href='MeasureSurvGrafSE.html'>MeasureSurvGrafSE</a></code>,
<code><a href='MeasureSurvHarrellC.html'>MeasureSurvHarrellC</a></code>,
<code><a href='MeasureSurvHungAUC.html'>MeasureSurvHungAUC</a></code>,
<code><a href='MeasureSurvIntLoglossSE.html'>MeasureSurvIntLoglossSE</a></code>,
<code><a href='MeasureSurvIntLogloss.html'>MeasureSurvIntLogloss</a></code>,
<code><a href='MeasureSurvLoglossSE.html'>MeasureSurvLoglossSE</a></code>,
<code><a href='MeasureSurvLogloss.html'>MeasureSurvLogloss</a></code>,
<code><a href='MeasureSurvMAESE.html'>MeasureSurvMAESE</a></code>,
<code><a href='MeasureSurvMAE.html'>MeasureSurvMAE</a></code>,
<code><a href='MeasureSurvMSESE.html'>MeasureSurvMSESE</a></code>,
<code><a href='MeasureSurvMSE.html'>MeasureSurvMSE</a></code>,
<code><a href='MeasureSurvNagelkR2.html'>MeasureSurvNagelkR2</a></code>,
<code><a href='MeasureSurvOQuigleyR2.html'>MeasureSurvOQuigleyR2</a></code>,
<code><a href='MeasureSurvRMSESE.html'>MeasureSurvRMSESE</a></code>,
<code><a href='MeasureSurvRMSE.html'>MeasureSurvRMSE</a></code>,
<code><a href='MeasureSurvSongAUC.html'>MeasureSurvSongAUC</a></code>,
<code><a href='MeasureSurvSongTNR.html'>MeasureSurvSongTNR</a></code>,
<code><a href='MeasureSurvSongTPR.html'>MeasureSurvSongTPR</a></code>,
<code><a href='MeasureSurvUnoAUC.html'>MeasureSurvUnoAUC</a></code>,
<code><a href='MeasureSurvUnoC.html'>MeasureSurvUnoC</a></code>,
<code><a href='MeasureSurvUnoTNR.html'>MeasureSurvUnoTNR</a></code>,
<code><a href='MeasureSurvUnoTPR.html'>MeasureSurvUnoTPR</a></code>,
<code><a href='MeasureSurvXuR2.html'>MeasureSurvXuR2</a></code></p>
<p>Other Probabilistic survival measures: 
<code><a href='MeasureSurvGrafSE.html'>MeasureSurvGrafSE</a></code>,
<code><a href='MeasureSurvIntLoglossSE.html'>MeasureSurvIntLoglossSE</a></code>,
<code><a href='MeasureSurvIntLogloss.html'>MeasureSurvIntLogloss</a></code>,
<code><a href='MeasureSurvLoglossSE.html'>MeasureSurvLoglossSE</a></code>,
<code><a href='MeasureSurvLogloss.html'>MeasureSurvLogloss</a></code></p>
<p>Other distr survival measures: 
<code><a href='MeasureSurvGrafSE.html'>MeasureSurvGrafSE</a></code>,
<code><a href='MeasureSurvIntLoglossSE.html'>MeasureSurvIntLoglossSE</a></code>,
<code><a href='MeasureSurvIntLogloss.html'>MeasureSurvIntLogloss</a></code>,
<code><a href='MeasureSurvLoglossSE.html'>MeasureSurvLoglossSE</a></code>,
<code><a href='MeasureSurvLogloss.html'>MeasureSurvLogloss</a></code></p></div>
    <h2 class="hasAnchor" id="super-classes"><a class="anchor" href="#super-classes"></a>Super classes</h2>

    <p><code><a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a></code> -&gt; <code><a href='MeasureSurv.html'>mlr3proba::MeasureSurv</a></code> -&gt; <code><a href='MeasureSurvIntegrated.html'>mlr3proba::MeasureSurvIntegrated</a></code> -&gt; <code>MeasureSurvGraf</code></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>MeasureSurvGraf$new()</code></a></p></li>
<li><p><a href='#method-clone'><code>MeasureSurvGraf$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-format'><code>mlr3::Measure$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-help'><code>mlr3::Measure$help()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-print'><code>mlr3::Measure$print()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-score'><code>mlr3::Measure$score()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Creates a new instance of this <a href='https://rdrr.io/pkg/R6/man/R6Class.html'>R6</a> class.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>MeasureSurvGraf</span>$<span class='fu'>new</span>(<span class='kw'>integrated</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>times</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fl'>2</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>integrated</code></dt><dd><p>(<code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code>)<br />
If <code>TRUE</code> (default), returns the integrated score; otherwise, not integrated.</p></dd>

<dt><code>times</code></dt><dd><p>(<code><a href='https://rdrr.io/r/base/numeric.html'>numeric()</a></code>)<br />
If <code>integrate == TRUE</code> then a vector of time-points over which to integrate the score.
If <code>integrate == FALSE</code> then a single time point at which to return the score.</p></dd>

<dt><code>method</code></dt><dd><p>(<code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code>)<br />
If <code>integrate == TRUE</code> selects the integration weighting method.
<code>method == 1</code> corresponds to weighting each time-point equally and taking the mean score over
discrete time-points. <code>method == 2</code> corresponds to calculating a mean weighted by the difference
between time-points. <code>method == 2</code> is default to be in line with other packages.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>MeasureSurvGraf</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Raphael Sonabend, Franz Kiraly, Michel Lang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


